2025-09-08 11:05:03 | pirate_content_bot.main.pirate_bot_main | WARNING  | <module>             | Some services not available: No module named 'services'
2025-09-08 11:05:03 | pirate_content_bot.main.pirate_bot_main | WARNING  | <module>             | Some utils not available: No module named 'utils'
2025-09-08 11:05:03 | pirate_content_bot.main.pirate_bot_main | INFO     | __init__             | 🚀 Initializing Enhanced Pirate Bot with Services Architecture
2025-09-08 11:05:03 | pirate_content_bot.database.connection_pool | INFO     | __init__             | Connection Pool initialized: pirate_pool
2025-09-08 11:05:03 | pirate_content_bot.utils.cache_manager | INFO     | __init__             | Cache Manager initialized: TTL={'enabled': True, 'type': 'redis', 'ttl': {'requests': 300, 'users': 600, 'stats': 180, 'duplicates': 120}, 'max_size': 1000, 'cleanup_interval': 300, 'redis_config': {'host': 'redis', 'port': 6379, 'db': 0, 'password': '', 'decode_responses': True}}s, Memory=100MB
2025-09-08 11:05:03 | pirate_content_bot.database.connection_pool | INFO     | __init__             | Connection Pool initialized: pirate_pool
2025-09-08 11:05:03 | pirate_content_bot.database.connection_pool | INFO     | create_pool          | Creating connection pool with config: {'pool_name': 'pirate_pool', 'pool_size': 10, 'pool_reset_session': True}
2025-09-08 11:05:03 | pirate_content_bot.database.connection_pool | ERROR    | create_pool          | Failed to create connection pool: 2005 (HY000): Unknown MySQL server host 'mysql' (-3)
2025-09-08 11:05:03 | pirate_content_bot.database.connection_pool | INFO     | create_pool          | Creating connection pool with config: {'pool_name': 'pirate_pool', 'pool_size': 10, 'pool_reset_session': True}
2025-09-08 11:05:03 | pirate_content_bot.database.connection_pool | ERROR    | create_pool          | Failed to create connection pool: 2005 (HY000): Unknown MySQL server host 'mysql' (-3)
2025-09-08 11:05:03 | pirate_content_bot.database.connection_pool | ERROR    | get_connection       | Connection error: Failed to get connection from pool
2025-09-08 11:05:03 | pirate_content_bot.database.connection_pool | ERROR    | execute_query        | Query execution failed: Failed to get connection from pool
2025-09-08 11:05:03 | pirate_content_bot.database.connection_pool | ERROR    | execute_query        | Query: 
        CREATE TABLE IF NOT EXISTS schema_migrations (
            version VARCHAR(50) PRIMARY KEY,
            description TEXT NOT NULL,
            executed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            execution_time_ms INT DEFAULT 0,
            checksum VARCHAR(64) NULL,
            
            INDEX executed_idx (executed_at)
        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
        
2025-09-08 11:05:03 | pirate_content_bot.database.connection_pool | ERROR    | execute_query        | Params: None
2025-09-08 11:05:03 | pirate_content_bot.database.migrations | ERROR    | _ensure_migration_table | Failed to create migration table: Failed to get connection from pool
2025-09-08 11:05:03 | pirate_content_bot.database.migrations | ERROR    | run_initial_setup    | Initial setup failed: Failed to get connection from pool
2025-09-08 11:05:03 | pirate_content_bot.core.storage_manager | WARNING  | _init_database_with_pool | Database setup had issues, but continuing
2025-09-08 11:05:03 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 11:05:03 | pirate_content_bot.core.storage_manager | INFO     | __init__             | Advanced Database mode enabled with Connection Pool
2025-09-08 11:05:03 | pirate_content_bot.database.connection_pool | INFO     | create_pool          | Creating connection pool with config: {'pool_name': 'pirate_pool', 'pool_size': 10, 'pool_reset_session': True}
2025-09-08 11:05:03 | pirate_content_bot.database.connection_pool | ERROR    | create_pool          | Failed to create connection pool: 2005 (HY000): Unknown MySQL server host 'mysql' (-3)
2025-09-08 11:05:03 | pirate_content_bot.database.connection_pool | ERROR    | get_connection       | Connection error: Failed to get connection from pool
2025-09-08 11:05:03 | pirate_content_bot.database.connection_pool | ERROR    | execute_query        | Query execution failed: Failed to get connection from pool
2025-09-08 11:05:03 | pirate_content_bot.database.connection_pool | ERROR    | execute_query        | Query: 
        CREATE TABLE IF NOT EXISTS schema_migrations (
            version VARCHAR(50) PRIMARY KEY,
            description TEXT NOT NULL,
            executed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            execution_time_ms INT DEFAULT 0,
            checksum VARCHAR(64) NULL,
            
            INDEX executed_idx (executed_at)
        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
        
2025-09-08 11:05:03 | pirate_content_bot.database.connection_pool | ERROR    | execute_query        | Params: None
2025-09-08 11:05:03 | pirate_content_bot.database.migrations | ERROR    | _ensure_migration_table | Failed to create migration table: Failed to get connection from pool
2025-09-08 11:05:03 | pirate_content_bot.database.migrations | ERROR    | run_initial_setup    | Initial setup failed: Failed to get connection from pool
2025-09-08 11:05:03 | pirate_content_bot.core.storage_manager | WARNING  | _init_database_with_pool | Database setup had issues, but continuing
2025-09-08 11:05:03 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 11:05:03 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_core_components | ✅ Core components initialized
2025-09-08 11:05:03 | pirate_content_bot.utils.duplicate_detector | INFO     | __init__             | Duplicate Detector initialized with threshold: 0.8
2025-09-08 11:05:03 | pirate_content_bot.utils.keyboards | INFO     | __init__             | Keyboard Builder initialized
2025-09-08 11:05:03 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_utils          | ✅ Utils initialized
2025-09-08 11:05:03 | pirate_content_bot.services.request_service | INFO     | __init__             | Request Service initialized
2025-09-08 11:05:03 | pirate_content_bot.services.rating_service | INFO     | __init__             | Rating Service initialized
2025-09-08 11:05:03 | pirate_content_bot.services.search_service | INFO     | __init__             | Search Service initialized
2025-09-08 11:05:03 | pirate_content_bot.services.user_service | INFO     | __init__             | User Service initialized
2025-09-08 11:05:03 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_services       | ✅ Services initialized
2025-09-08 11:05:03 | pirate_content_bot.main.pirate_bot_main | INFO     | _create_application  | ✅ Telegram Application created
2025-09-08 11:05:03 | pirate_content_bot.main.pirate_bot_main | INFO     | _setup_handlers      | ✅ Handlers configured
2025-09-08 11:05:03 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_background_tasks | 🔄 Background tasks initialized
2025-09-08 11:05:03 | pirate_content_bot.main.pirate_bot_main | INFO     | __init__             | ✅ Enhanced Pirate Bot initialized successfully
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring | Testing request scoring with new threshold (15%)...
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring | ============================================================
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring | ✅ PASS | Text: 'יש שובר שורות?'
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring |       | Score: 40 (threshold: 15)
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring |       | Expected: DETECT, Got: DETECT
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring |       | Reason: Should be detected - contains 'יש' + 'שובר שורות' content name
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring | ------------------------------------------------------------
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring | ✅ PASS | Text: 'אפשר פוטושופ?'
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring |       | Score: 15 (threshold: 15)
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring |       | Expected: DETECT, Got: DETECT
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring |       | Reason: Should be detected - contains 'אפשר' + 'photoshop' software name
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring | ------------------------------------------------------------
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring | ✅ PASS | Text: 'היי איך הולך?'
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring |       | Score: 0 (threshold: 15)
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring |       | Expected: IGNORE, Got: IGNORE
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring |       | Reason: Should NOT be detected - casual conversation
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring | ------------------------------------------------------------
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring | ✅ PASS | Text: 'תודה רבה!'
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring |       | Score: 0 (threshold: 15)
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring |       | Expected: IGNORE, Got: IGNORE
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring |       | Reason: Should NOT be detected - thanks message
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring | ------------------------------------------------------------
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring | ✅ PASS | Text: 'מישהו יש את הסרט Avatar?'
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring |       | Score: 95 (threshold: 15)
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring |       | Expected: DETECT, Got: DETECT
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring |       | Reason: Should be detected - clear request pattern
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring | ------------------------------------------------------------
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring | ✅ PASS | Text: 'איפה הסדרה Breaking Bad?'
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring |       | Score: 45 (threshold: 15)
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring |       | Expected: DETECT, Got: DETECT
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring |       | Reason: Should be detected - location + content
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring | ------------------------------------------------------------
2025-09-08 11:05:03 | __main__             | INFO     | test_request_scoring | ✅ Test completed!
2025-09-08 11:16:21 | pirate_content_bot.main.pirate_bot_main | WARNING  | <module>             | Some services not available: No module named 'services'
2025-09-08 11:16:21 | pirate_content_bot.main.pirate_bot_main | WARNING  | <module>             | Some utils not available: No module named 'utils'
2025-09-08 11:16:21 | pirate_content_bot.main.pirate_bot_main | INFO     | __init__             | 🚀 Initializing Enhanced Pirate Bot with Services Architecture
2025-09-08 11:16:21 | pirate_content_bot.database.connection_pool | INFO     | __init__             | Connection Pool initialized: pirate_pool
2025-09-08 11:16:21 | pirate_content_bot.utils.cache_manager | INFO     | __init__             | Cache Manager initialized: TTL={'enabled': True, 'type': 'redis', 'ttl': {'requests': 300, 'users': 600, 'stats': 180, 'duplicates': 120}, 'max_size': 1000, 'cleanup_interval': 300, 'redis_config': {'host': 'redis', 'port': 6379, 'db': 0, 'password': '', 'decode_responses': True}}s, Memory=100MB
2025-09-08 11:16:21 | pirate_content_bot.database.connection_pool | INFO     | __init__             | Connection Pool initialized: pirate_pool
2025-09-08 11:16:21 | pirate_content_bot.database.connection_pool | INFO     | create_pool          | Creating connection pool with config: {'pool_name': 'pirate_pool', 'pool_size': 10, 'pool_reset_session': True}
2025-09-08 11:16:21 | pirate_content_bot.database.connection_pool | ERROR    | create_pool          | Failed to create connection pool: 2005 (HY000): Unknown MySQL server host 'mysql' (-3)
2025-09-08 11:16:21 | pirate_content_bot.database.connection_pool | INFO     | create_pool          | Creating connection pool with config: {'pool_name': 'pirate_pool', 'pool_size': 10, 'pool_reset_session': True}
2025-09-08 11:16:21 | pirate_content_bot.database.connection_pool | ERROR    | create_pool          | Failed to create connection pool: 2005 (HY000): Unknown MySQL server host 'mysql' (-3)
2025-09-08 11:16:21 | pirate_content_bot.database.connection_pool | ERROR    | get_connection       | Connection error: Failed to get connection from pool
2025-09-08 11:16:21 | pirate_content_bot.database.connection_pool | ERROR    | execute_query        | Query execution failed: Failed to get connection from pool
2025-09-08 11:16:21 | pirate_content_bot.database.connection_pool | ERROR    | execute_query        | Query: 
        CREATE TABLE IF NOT EXISTS schema_migrations (
            version VARCHAR(50) PRIMARY KEY,
            description TEXT NOT NULL,
            executed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            execution_time_ms INT DEFAULT 0,
            checksum VARCHAR(64) NULL,
            
            INDEX executed_idx (executed_at)
        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
        
2025-09-08 11:16:21 | pirate_content_bot.database.connection_pool | ERROR    | execute_query        | Params: None
2025-09-08 11:16:21 | pirate_content_bot.database.migrations | ERROR    | _ensure_migration_table | Failed to create migration table: Failed to get connection from pool
2025-09-08 11:16:21 | pirate_content_bot.database.migrations | ERROR    | run_initial_setup    | Initial setup failed: Failed to get connection from pool
2025-09-08 11:16:21 | pirate_content_bot.core.storage_manager | WARNING  | _init_database_with_pool | Database setup had issues, but continuing
2025-09-08 11:16:21 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 11:16:21 | pirate_content_bot.core.storage_manager | INFO     | __init__             | Advanced Database mode enabled with Connection Pool
2025-09-08 11:16:21 | pirate_content_bot.database.connection_pool | INFO     | create_pool          | Creating connection pool with config: {'pool_name': 'pirate_pool', 'pool_size': 10, 'pool_reset_session': True}
2025-09-08 11:16:21 | pirate_content_bot.database.connection_pool | ERROR    | create_pool          | Failed to create connection pool: 2005 (HY000): Unknown MySQL server host 'mysql' (-3)
2025-09-08 11:16:21 | pirate_content_bot.database.connection_pool | ERROR    | get_connection       | Connection error: Failed to get connection from pool
2025-09-08 11:16:21 | pirate_content_bot.database.connection_pool | ERROR    | execute_query        | Query execution failed: Failed to get connection from pool
2025-09-08 11:16:21 | pirate_content_bot.database.connection_pool | ERROR    | execute_query        | Query: 
        CREATE TABLE IF NOT EXISTS schema_migrations (
            version VARCHAR(50) PRIMARY KEY,
            description TEXT NOT NULL,
            executed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            execution_time_ms INT DEFAULT 0,
            checksum VARCHAR(64) NULL,
            
            INDEX executed_idx (executed_at)
        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
        
2025-09-08 11:16:21 | pirate_content_bot.database.connection_pool | ERROR    | execute_query        | Params: None
2025-09-08 11:16:21 | pirate_content_bot.database.migrations | ERROR    | _ensure_migration_table | Failed to create migration table: Failed to get connection from pool
2025-09-08 11:16:21 | pirate_content_bot.database.migrations | ERROR    | run_initial_setup    | Initial setup failed: Failed to get connection from pool
2025-09-08 11:16:21 | pirate_content_bot.core.storage_manager | WARNING  | _init_database_with_pool | Database setup had issues, but continuing
2025-09-08 11:16:21 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 11:16:21 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_core_components | ✅ Core components initialized
2025-09-08 11:16:21 | pirate_content_bot.utils.duplicate_detector | INFO     | __init__             | Duplicate Detector initialized with threshold: 0.8
2025-09-08 11:16:21 | pirate_content_bot.utils.keyboards | INFO     | __init__             | Keyboard Builder initialized
2025-09-08 11:16:21 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_utils          | ✅ Utils initialized
2025-09-08 11:16:21 | pirate_content_bot.services.request_service | INFO     | __init__             | Request Service initialized
2025-09-08 11:16:21 | pirate_content_bot.services.rating_service | INFO     | __init__             | Rating Service initialized
2025-09-08 11:16:21 | pirate_content_bot.services.search_service | INFO     | __init__             | Search Service initialized
2025-09-08 11:16:21 | pirate_content_bot.services.user_service | INFO     | __init__             | User Service initialized
2025-09-08 11:16:21 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_services       | ✅ Services initialized
2025-09-08 11:16:21 | pirate_content_bot.main.pirate_bot_main | INFO     | _create_application  | ✅ Telegram Application created
2025-09-08 11:16:21 | pirate_content_bot.main.pirate_bot_main | INFO     | _setup_handlers      | ✅ Handlers configured
2025-09-08 11:16:21 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_background_tasks | 🔄 Background tasks initialized
2025-09-08 11:16:21 | pirate_content_bot.main.pirate_bot_main | INFO     | __init__             | ✅ Enhanced Pirate Bot initialized successfully
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring | Testing request scoring with new threshold (15%)...
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring | ============================================================
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring | ✅ PASS | Text: 'יש שובר שורות?'
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring |       | Score: 40 (threshold: 15)
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring |       | Expected: DETECT, Got: DETECT
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring |       | Reason: Should be detected - contains 'יש' + 'שובר שורות' content name
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring | ------------------------------------------------------------
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring | ✅ PASS | Text: 'אפשר פוטושופ?'
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring |       | Score: 15 (threshold: 15)
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring |       | Expected: DETECT, Got: DETECT
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring |       | Reason: Should be detected - contains 'אפשר' + 'photoshop' software name
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring | ------------------------------------------------------------
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring | ✅ PASS | Text: 'היי איך הולך?'
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring |       | Score: 0 (threshold: 15)
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring |       | Expected: IGNORE, Got: IGNORE
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring |       | Reason: Should NOT be detected - casual conversation
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring | ------------------------------------------------------------
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring | ✅ PASS | Text: 'תודה רבה!'
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring |       | Score: 0 (threshold: 15)
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring |       | Expected: IGNORE, Got: IGNORE
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring |       | Reason: Should NOT be detected - thanks message
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring | ------------------------------------------------------------
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring | ✅ PASS | Text: 'מישהו יש את הסרט Avatar?'
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring |       | Score: 95 (threshold: 15)
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring |       | Expected: DETECT, Got: DETECT
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring |       | Reason: Should be detected - clear request pattern
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring | ------------------------------------------------------------
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring | ✅ PASS | Text: 'איפה הסדרה Breaking Bad?'
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring |       | Score: 45 (threshold: 15)
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring |       | Expected: DETECT, Got: DETECT
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring |       | Reason: Should be detected - location + content
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring | ------------------------------------------------------------
2025-09-08 11:16:21 | __main__             | INFO     | test_request_scoring | ✅ Test completed!
2025-09-08 11:24:21 | pirate_content_bot.main.pirate_bot_main | INFO     | __init__             | 🚀 Initializing Enhanced Pirate Bot with Services Architecture
2025-09-08 11:24:21 | pirate_content_bot.database.connection_pool | INFO     | __init__             | Connection Pool initialized: pirate_pool
2025-09-08 11:24:21 | utils.cache_manager  | INFO     | __init__             | Cache Manager initialized: TTL={'enabled': True, 'type': 'redis', 'ttl': {'requests': 300, 'users': 600, 'stats': 180, 'duplicates': 120}, 'max_size': 1000, 'cleanup_interval': 300, 'redis_config': {'host': 'redis', 'port': 6379, 'db': 0, 'password': '', 'decode_responses': True}}s, Memory=100MB
2025-09-08 11:24:21 | pirate_content_bot.database.connection_pool | INFO     | __init__             | Connection Pool initialized: pirate_pool
2025-09-08 11:24:21 | pirate_content_bot.database.connection_pool | INFO     | create_pool          | Creating connection pool with config: {'pool_name': 'pirate_pool', 'pool_size': 10, 'pool_reset_session': True}
2025-09-08 11:24:21 | pirate_content_bot.database.connection_pool | ERROR    | create_pool          | Failed to create connection pool: 2005 (HY000): Unknown MySQL server host 'mysql' (-3)
2025-09-08 11:24:21 | pirate_content_bot.database.connection_pool | INFO     | create_pool          | Creating connection pool with config: {'pool_name': 'pirate_pool', 'pool_size': 10, 'pool_reset_session': True}
2025-09-08 11:24:21 | pirate_content_bot.database.connection_pool | ERROR    | create_pool          | Failed to create connection pool: 2005 (HY000): Unknown MySQL server host 'mysql' (-3)
2025-09-08 11:24:21 | pirate_content_bot.database.connection_pool | ERROR    | get_connection       | Connection error: Failed to get connection from pool
2025-09-08 11:24:21 | pirate_content_bot.database.connection_pool | ERROR    | execute_query        | Query execution failed: Failed to get connection from pool
2025-09-08 11:24:21 | pirate_content_bot.database.connection_pool | ERROR    | execute_query        | Query: 
        CREATE TABLE IF NOT EXISTS schema_migrations (
            version VARCHAR(50) PRIMARY KEY,
            description TEXT NOT NULL,
            executed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            execution_time_ms INT DEFAULT 0,
            checksum VARCHAR(64) NULL,
            
            INDEX executed_idx (executed_at)
        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
        
2025-09-08 11:24:21 | pirate_content_bot.database.connection_pool | ERROR    | execute_query        | Params: None
2025-09-08 11:24:21 | pirate_content_bot.database.migrations | ERROR    | _ensure_migration_table | Failed to create migration table: Failed to get connection from pool
2025-09-08 11:24:21 | pirate_content_bot.database.migrations | ERROR    | run_initial_setup    | Initial setup failed: Failed to get connection from pool
2025-09-08 11:24:21 | pirate_content_bot.core.storage_manager | WARNING  | _init_database_with_pool | Database setup had issues, but continuing
2025-09-08 11:24:21 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 11:24:21 | pirate_content_bot.core.storage_manager | INFO     | __init__             | Advanced Database mode enabled with Connection Pool
2025-09-08 11:24:21 | pirate_content_bot.database.connection_pool | INFO     | create_pool          | Creating connection pool with config: {'pool_name': 'pirate_pool', 'pool_size': 10, 'pool_reset_session': True}
2025-09-08 11:24:21 | pirate_content_bot.database.connection_pool | ERROR    | create_pool          | Failed to create connection pool: 2005 (HY000): Unknown MySQL server host 'mysql' (-3)
2025-09-08 11:24:21 | pirate_content_bot.database.connection_pool | ERROR    | get_connection       | Connection error: Failed to get connection from pool
2025-09-08 11:24:21 | pirate_content_bot.database.connection_pool | ERROR    | execute_query        | Query execution failed: Failed to get connection from pool
2025-09-08 11:24:21 | pirate_content_bot.database.connection_pool | ERROR    | execute_query        | Query: 
        CREATE TABLE IF NOT EXISTS schema_migrations (
            version VARCHAR(50) PRIMARY KEY,
            description TEXT NOT NULL,
            executed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            execution_time_ms INT DEFAULT 0,
            checksum VARCHAR(64) NULL,
            
            INDEX executed_idx (executed_at)
        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
        
2025-09-08 11:24:21 | pirate_content_bot.database.connection_pool | ERROR    | execute_query        | Params: None
2025-09-08 11:24:21 | pirate_content_bot.database.migrations | ERROR    | _ensure_migration_table | Failed to create migration table: Failed to get connection from pool
2025-09-08 11:24:21 | pirate_content_bot.database.migrations | ERROR    | run_initial_setup    | Initial setup failed: Failed to get connection from pool
2025-09-08 11:24:21 | pirate_content_bot.core.storage_manager | WARNING  | _init_database_with_pool | Database setup had issues, but continuing
2025-09-08 11:24:21 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 11:24:21 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_core_components | ✅ Core components initialized
2025-09-08 11:24:21 | utils.duplicate_detector | INFO     | __init__             | Duplicate Detector initialized with threshold: 0.8
2025-09-08 11:24:21 | utils.keyboards      | INFO     | __init__             | Keyboard Builder initialized
2025-09-08 11:24:21 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_utils          | ✅ Utils initialized
2025-09-08 11:24:21 | services.request_service | INFO     | __init__             | Request Service initialized
2025-09-08 11:24:21 | services.rating_service | INFO     | __init__             | Rating Service initialized
2025-09-08 11:24:21 | services.search_service | INFO     | __init__             | Search Service initialized
2025-09-08 11:24:21 | services.user_service | INFO     | __init__             | User Service initialized
2025-09-08 11:24:21 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_services       | ✅ Services initialized
2025-09-08 11:24:21 | pirate_content_bot.main.pirate_bot_main | INFO     | _create_application  | ✅ Telegram Application created
2025-09-08 11:24:21 | pirate_content_bot.main.pirate_bot_main | INFO     | _setup_handlers      | ✅ Handlers configured
2025-09-08 11:24:21 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_background_tasks | 🔄 Background tasks initialized
2025-09-08 11:24:21 | pirate_content_bot.main.pirate_bot_main | INFO     | __init__             | ✅ Enhanced Pirate Bot initialized successfully
2025-09-08 11:24:21 | __main__             | INFO     | test_analysis        | Testing analysis with fixed thresholds...
2025-09-08 11:24:21 | __main__             | INFO     | test_analysis        | Text: 'יש שובר שורות?'
2025-09-08 11:24:21 | __main__             | INFO     | test_analysis        |   Score: 40
2025-09-08 11:24:21 | __main__             | INFO     | test_analysis        |   Category: general
2025-09-08 11:24:21 | __main__             | INFO     | test_analysis        |   is_clear: True
2025-09-08 11:24:21 | __main__             | INFO     | test_analysis        |   might_be: True
2025-09-08 11:24:21 | __main__             | INFO     | test_analysis        |   Should process: True
2025-09-08 11:24:21 | __main__             | INFO     | test_analysis        | --------------------------------------------------
2025-09-08 11:24:21 | __main__             | INFO     | test_analysis        | Text: 'אפשר פוטושופ?'
2025-09-08 11:24:21 | __main__             | INFO     | test_analysis        |   Score: 15
2025-09-08 11:24:21 | __main__             | INFO     | test_analysis        |   Category: general
2025-09-08 11:24:21 | __main__             | INFO     | test_analysis        |   is_clear: True
2025-09-08 11:24:21 | __main__             | INFO     | test_analysis        |   might_be: False
2025-09-08 11:24:21 | __main__             | INFO     | test_analysis        |   Should process: True
2025-09-08 11:24:21 | __main__             | INFO     | test_analysis        | --------------------------------------------------
2025-09-08 11:24:21 | __main__             | INFO     | test_analysis        | Text: 'אפשר בבקשה בדיקה?'
2025-09-08 11:24:21 | __main__             | INFO     | test_analysis        |   Score: 15
2025-09-08 11:24:21 | __main__             | INFO     | test_analysis        |   Category: general
2025-09-08 11:24:21 | __main__             | INFO     | test_analysis        |   is_clear: True
2025-09-08 11:24:21 | __main__             | INFO     | test_analysis        |   might_be: False
2025-09-08 11:24:21 | __main__             | INFO     | test_analysis        |   Should process: True
2025-09-08 11:24:21 | __main__             | INFO     | test_analysis        | --------------------------------------------------
2025-09-08 11:24:21 | __main__             | INFO     | test_analysis        | ✅ Analysis test completed!
2025-09-08 11:58:45 | __main__             | INFO     | test_commands        | Initializing bot for command testing...
2025-09-08 11:58:45 | pirate_content_bot.main.pirate_bot_main | INFO     | __init__             | 🚀 Initializing Enhanced Pirate Bot with Services Architecture
2025-09-08 11:58:45 | pirate_content_bot.database.connection_pool | INFO     | __init__             | Connection Pool initialized: pirate_pool
2025-09-08 11:58:45 | utils.cache_manager  | INFO     | __init__             | Cache Manager initialized: TTL={'enabled': True, 'type': 'redis', 'ttl': {'requests': 300, 'users': 600, 'stats': 180, 'duplicates': 120}, 'max_size': 1000, 'cleanup_interval': 300, 'redis_config': {'host': 'redis', 'port': 6379, 'db': 0, 'password': '', 'decode_responses': True}}s, Memory=100MB
2025-09-08 11:58:45 | pirate_content_bot.database.connection_pool | INFO     | __init__             | Connection Pool initialized: pirate_pool
2025-09-08 11:58:45 | pirate_content_bot.database.connection_pool | INFO     | create_pool          | Creating connection pool with config: {'pool_name': 'pirate_pool', 'pool_size': 10, 'pool_reset_session': True}
2025-09-08 11:58:46 | pirate_content_bot.database.connection_pool | INFO     | create_pool          | Connection pool created successfully: pirate_pool
2025-09-08 11:58:46 | pirate_content_bot.database.migrations | INFO     | _ensure_migration_table | Migration table ensured
2025-09-08 11:58:46 | pirate_content_bot.database.migrations | INFO     | run_migrations       | No pending migrations
2025-09-08 11:58:46 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Initial database setup completed successfully
2025-09-08 11:58:46 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Database version: 011_add_episode_column
2025-09-08 11:58:46 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Executed migrations: 11/11
2025-09-08 11:58:46 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 11:58:46 | pirate_content_bot.core.storage_manager | INFO     | __init__             | Advanced Database mode enabled with Connection Pool
2025-09-08 11:58:46 | pirate_content_bot.database.migrations | INFO     | _ensure_migration_table | Migration table ensured
2025-09-08 11:58:46 | pirate_content_bot.database.migrations | INFO     | run_migrations       | No pending migrations
2025-09-08 11:58:46 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Initial database setup completed successfully
2025-09-08 11:58:46 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Database version: 011_add_episode_column
2025-09-08 11:58:46 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Executed migrations: 11/11
2025-09-08 11:58:46 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 11:58:46 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_core_components | ✅ Core components initialized
2025-09-08 11:58:46 | utils.duplicate_detector | INFO     | __init__             | Duplicate Detector initialized with threshold: 0.8
2025-09-08 11:58:46 | utils.keyboards      | INFO     | __init__             | Keyboard Builder initialized
2025-09-08 11:58:46 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_utils          | ✅ Utils initialized
2025-09-08 11:58:46 | services.request_service | INFO     | __init__             | Request Service initialized
2025-09-08 11:58:46 | services.rating_service | INFO     | __init__             | Rating Service initialized
2025-09-08 11:58:46 | services.search_service | INFO     | __init__             | Search Service initialized
2025-09-08 11:58:46 | services.user_service | INFO     | __init__             | User Service initialized
2025-09-08 11:58:46 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_services       | ✅ Services initialized
2025-09-08 11:58:46 | pirate_content_bot.main.pirate_bot_main | INFO     | _create_application  | ✅ Telegram Application created
2025-09-08 11:58:46 | pirate_content_bot.main.pirate_bot_main | INFO     | _setup_handlers      | ✅ Handlers configured
2025-09-08 11:58:46 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_background_tasks | 🔄 Background tasks initialized
2025-09-08 11:58:46 | pirate_content_bot.main.pirate_bot_main | INFO     | __init__             | ✅ Enhanced Pirate Bot initialized successfully
2025-09-08 11:58:46 | __main__             | ERROR    | test_commands        | ❌ Test failed: 'EnhancedPirateBot' object has no attribute '_init_components'
2025-09-08 11:58:54 | __main__             | INFO     | test_commands        | Initializing bot for command testing...
2025-09-08 11:58:54 | pirate_content_bot.main.pirate_bot_main | INFO     | __init__             | 🚀 Initializing Enhanced Pirate Bot with Services Architecture
2025-09-08 11:58:54 | pirate_content_bot.database.connection_pool | INFO     | __init__             | Connection Pool initialized: pirate_pool
2025-09-08 11:58:54 | utils.cache_manager  | INFO     | __init__             | Cache Manager initialized: TTL={'enabled': True, 'type': 'redis', 'ttl': {'requests': 300, 'users': 600, 'stats': 180, 'duplicates': 120}, 'max_size': 1000, 'cleanup_interval': 300, 'redis_config': {'host': 'redis', 'port': 6379, 'db': 0, 'password': '', 'decode_responses': True}}s, Memory=100MB
2025-09-08 11:58:54 | pirate_content_bot.database.connection_pool | INFO     | __init__             | Connection Pool initialized: pirate_pool
2025-09-08 11:58:54 | pirate_content_bot.database.connection_pool | INFO     | create_pool          | Creating connection pool with config: {'pool_name': 'pirate_pool', 'pool_size': 10, 'pool_reset_session': True}
2025-09-08 11:58:54 | pirate_content_bot.database.connection_pool | INFO     | create_pool          | Connection pool created successfully: pirate_pool
2025-09-08 11:58:54 | pirate_content_bot.database.migrations | INFO     | _ensure_migration_table | Migration table ensured
2025-09-08 11:58:54 | pirate_content_bot.database.migrations | INFO     | run_migrations       | No pending migrations
2025-09-08 11:58:54 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Initial database setup completed successfully
2025-09-08 11:58:54 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Database version: 011_add_episode_column
2025-09-08 11:58:54 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Executed migrations: 11/11
2025-09-08 11:58:54 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 11:58:54 | pirate_content_bot.core.storage_manager | INFO     | __init__             | Advanced Database mode enabled with Connection Pool
2025-09-08 11:58:54 | pirate_content_bot.database.migrations | INFO     | _ensure_migration_table | Migration table ensured
2025-09-08 11:58:54 | pirate_content_bot.database.migrations | INFO     | run_migrations       | No pending migrations
2025-09-08 11:58:54 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Initial database setup completed successfully
2025-09-08 11:58:54 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Database version: 011_add_episode_column
2025-09-08 11:58:54 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Executed migrations: 11/11
2025-09-08 11:58:54 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 11:58:54 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_core_components | ✅ Core components initialized
2025-09-08 11:58:54 | utils.duplicate_detector | INFO     | __init__             | Duplicate Detector initialized with threshold: 0.8
2025-09-08 11:58:54 | utils.keyboards      | INFO     | __init__             | Keyboard Builder initialized
2025-09-08 11:58:54 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_utils          | ✅ Utils initialized
2025-09-08 11:58:54 | services.request_service | INFO     | __init__             | Request Service initialized
2025-09-08 11:58:54 | services.rating_service | INFO     | __init__             | Rating Service initialized
2025-09-08 11:58:54 | services.search_service | INFO     | __init__             | Search Service initialized
2025-09-08 11:58:54 | services.user_service | INFO     | __init__             | User Service initialized
2025-09-08 11:58:54 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_services       | ✅ Services initialized
2025-09-08 11:58:54 | pirate_content_bot.main.pirate_bot_main | INFO     | _create_application  | ✅ Telegram Application created
2025-09-08 11:58:54 | pirate_content_bot.main.pirate_bot_main | INFO     | _setup_handlers      | ✅ Handlers configured
2025-09-08 11:58:54 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_background_tasks | 🔄 Background tasks initialized
2025-09-08 11:58:54 | pirate_content_bot.main.pirate_bot_main | INFO     | __init__             | ✅ Enhanced Pirate Bot initialized successfully
2025-09-08 11:58:54 | pirate_content_bot.database.connection_pool | INFO     | __init__             | Connection Pool initialized: pirate_pool
2025-09-08 11:58:54 | utils.cache_manager  | INFO     | __init__             | Cache Manager initialized: TTL={'enabled': True, 'type': 'redis', 'ttl': {'requests': 300, 'users': 600, 'stats': 180, 'duplicates': 120}, 'max_size': 1000, 'cleanup_interval': 300, 'redis_config': {'host': 'redis', 'port': 6379, 'db': 0, 'password': '', 'decode_responses': True}}s, Memory=100MB
2025-09-08 11:58:54 | pirate_content_bot.database.migrations | INFO     | _ensure_migration_table | Migration table ensured
2025-09-08 11:58:54 | pirate_content_bot.database.migrations | INFO     | run_migrations       | No pending migrations
2025-09-08 11:58:54 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Initial database setup completed successfully
2025-09-08 11:58:54 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Database version: 011_add_episode_column
2025-09-08 11:58:54 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Executed migrations: 11/11
2025-09-08 11:58:54 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 11:58:54 | pirate_content_bot.core.storage_manager | INFO     | __init__             | Advanced Database mode enabled with Connection Pool
2025-09-08 11:58:55 | pirate_content_bot.database.migrations | INFO     | _ensure_migration_table | Migration table ensured
2025-09-08 11:58:55 | pirate_content_bot.database.migrations | INFO     | run_migrations       | No pending migrations
2025-09-08 11:58:55 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Initial database setup completed successfully
2025-09-08 11:58:55 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Database version: 011_add_episode_column
2025-09-08 11:58:55 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Executed migrations: 11/11
2025-09-08 11:58:55 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 11:58:55 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_core_components | ✅ Core components initialized
2025-09-08 11:58:55 | __main__             | ERROR    | test_commands        | ❌ Test failed: object NoneType can't be used in 'await' expression
2025-09-08 11:59:12 | __main__             | INFO     | test_commands        | Initializing bot for command testing...
2025-09-08 11:59:12 | pirate_content_bot.main.pirate_bot_main | INFO     | __init__             | 🚀 Initializing Enhanced Pirate Bot with Services Architecture
2025-09-08 11:59:12 | pirate_content_bot.database.connection_pool | INFO     | __init__             | Connection Pool initialized: pirate_pool
2025-09-08 11:59:12 | utils.cache_manager  | INFO     | __init__             | Cache Manager initialized: TTL={'enabled': True, 'type': 'redis', 'ttl': {'requests': 300, 'users': 600, 'stats': 180, 'duplicates': 120}, 'max_size': 1000, 'cleanup_interval': 300, 'redis_config': {'host': 'redis', 'port': 6379, 'db': 0, 'password': '', 'decode_responses': True}}s, Memory=100MB
2025-09-08 11:59:12 | pirate_content_bot.database.connection_pool | INFO     | __init__             | Connection Pool initialized: pirate_pool
2025-09-08 11:59:12 | pirate_content_bot.database.connection_pool | INFO     | create_pool          | Creating connection pool with config: {'pool_name': 'pirate_pool', 'pool_size': 10, 'pool_reset_session': True}
2025-09-08 11:59:13 | pirate_content_bot.database.connection_pool | INFO     | create_pool          | Connection pool created successfully: pirate_pool
2025-09-08 11:59:13 | pirate_content_bot.database.migrations | INFO     | _ensure_migration_table | Migration table ensured
2025-09-08 11:59:13 | pirate_content_bot.database.migrations | INFO     | run_migrations       | No pending migrations
2025-09-08 11:59:13 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Initial database setup completed successfully
2025-09-08 11:59:13 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Database version: 011_add_episode_column
2025-09-08 11:59:13 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Executed migrations: 11/11
2025-09-08 11:59:13 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 11:59:13 | pirate_content_bot.core.storage_manager | INFO     | __init__             | Advanced Database mode enabled with Connection Pool
2025-09-08 11:59:13 | pirate_content_bot.database.migrations | INFO     | _ensure_migration_table | Migration table ensured
2025-09-08 11:59:13 | pirate_content_bot.database.migrations | INFO     | run_migrations       | No pending migrations
2025-09-08 11:59:13 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Initial database setup completed successfully
2025-09-08 11:59:13 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Database version: 011_add_episode_column
2025-09-08 11:59:13 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Executed migrations: 11/11
2025-09-08 11:59:13 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 11:59:13 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_core_components | ✅ Core components initialized
2025-09-08 11:59:13 | utils.duplicate_detector | INFO     | __init__             | Duplicate Detector initialized with threshold: 0.8
2025-09-08 11:59:13 | utils.keyboards      | INFO     | __init__             | Keyboard Builder initialized
2025-09-08 11:59:13 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_utils          | ✅ Utils initialized
2025-09-08 11:59:13 | services.request_service | INFO     | __init__             | Request Service initialized
2025-09-08 11:59:13 | services.rating_service | INFO     | __init__             | Rating Service initialized
2025-09-08 11:59:13 | services.search_service | INFO     | __init__             | Search Service initialized
2025-09-08 11:59:13 | services.user_service | INFO     | __init__             | User Service initialized
2025-09-08 11:59:13 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_services       | ✅ Services initialized
2025-09-08 11:59:13 | pirate_content_bot.main.pirate_bot_main | INFO     | _create_application  | ✅ Telegram Application created
2025-09-08 11:59:13 | pirate_content_bot.main.pirate_bot_main | INFO     | _setup_handlers      | ✅ Handlers configured
2025-09-08 11:59:13 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_background_tasks | 🔄 Background tasks initialized
2025-09-08 11:59:13 | pirate_content_bot.main.pirate_bot_main | INFO     | __init__             | ✅ Enhanced Pirate Bot initialized successfully
2025-09-08 11:59:13 | pirate_content_bot.database.connection_pool | INFO     | __init__             | Connection Pool initialized: pirate_pool
2025-09-08 11:59:13 | utils.cache_manager  | INFO     | __init__             | Cache Manager initialized: TTL={'enabled': True, 'type': 'redis', 'ttl': {'requests': 300, 'users': 600, 'stats': 180, 'duplicates': 120}, 'max_size': 1000, 'cleanup_interval': 300, 'redis_config': {'host': 'redis', 'port': 6379, 'db': 0, 'password': '', 'decode_responses': True}}s, Memory=100MB
2025-09-08 11:59:13 | pirate_content_bot.database.migrations | INFO     | _ensure_migration_table | Migration table ensured
2025-09-08 11:59:13 | pirate_content_bot.database.migrations | INFO     | run_migrations       | No pending migrations
2025-09-08 11:59:13 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Initial database setup completed successfully
2025-09-08 11:59:13 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Database version: 011_add_episode_column
2025-09-08 11:59:13 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Executed migrations: 11/11
2025-09-08 11:59:13 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 11:59:13 | pirate_content_bot.core.storage_manager | INFO     | __init__             | Advanced Database mode enabled with Connection Pool
2025-09-08 11:59:13 | pirate_content_bot.database.migrations | INFO     | _ensure_migration_table | Migration table ensured
2025-09-08 11:59:13 | pirate_content_bot.database.migrations | INFO     | run_migrations       | No pending migrations
2025-09-08 11:59:13 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Initial database setup completed successfully
2025-09-08 11:59:13 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Database version: 011_add_episode_column
2025-09-08 11:59:13 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Executed migrations: 11/11
2025-09-08 11:59:13 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 11:59:13 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_core_components | ✅ Core components initialized
2025-09-08 11:59:13 | utils.duplicate_detector | INFO     | __init__             | Duplicate Detector initialized with threshold: 0.8
2025-09-08 11:59:13 | utils.keyboards      | INFO     | __init__             | Keyboard Builder initialized
2025-09-08 11:59:13 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_utils          | ✅ Utils initialized
2025-09-08 11:59:13 | services.request_service | INFO     | __init__             | Request Service initialized
2025-09-08 11:59:13 | services.rating_service | INFO     | __init__             | Rating Service initialized
2025-09-08 11:59:13 | services.search_service | INFO     | __init__             | Search Service initialized
2025-09-08 11:59:13 | services.user_service | INFO     | __init__             | User Service initialized
2025-09-08 11:59:13 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_services       | ✅ Services initialized
2025-09-08 11:59:13 | __main__             | INFO     | test_commands        | 🧪 Testing commands for issues...
2025-09-08 11:59:13 | __main__             | INFO     | test_commands        | ============================================================
2025-09-08 11:59:13 | __main__             | INFO     | test_commands        | 🔬 Testing ANALYTICS command...
2025-09-08 11:59:13 | __main__             | INFO     | test_commands        | ✅ Analytics command executed successfully
2025-09-08 11:59:13 | __main__             | INFO     | test_commands        | Response preview: ❌ פקודה זמינה רק למנהלים...
2025-09-08 11:59:13 | __main__             | INFO     | test_commands        | ============================================================
2025-09-08 11:59:13 | __main__             | INFO     | test_commands        | 🔍 Testing SEARCH command...
2025-09-08 11:59:13 | pirate_content_bot.database.connection_pool | ERROR    | get_connection       | Connection error: 3065 (HY000): Expression #1 of ORDER BY clause is not in SELECT list, references column 'pirate_content.content_requests.created_at' which is not in SELECT list; this is incompatible with DISTINCT
2025-09-08 11:59:13 | pirate_content_bot.database.connection_pool | ERROR    | execute_query        | Query execution failed: 3065 (HY000): Expression #1 of ORDER BY clause is not in SELECT list, references column 'pirate_content.content_requests.created_at' which is not in SELECT list; this is incompatible with DISTINCT
2025-09-08 11:59:13 | pirate_content_bot.database.connection_pool | ERROR    | execute_query        | Query: 
            SELECT DISTINCT title
            FROM content_requests 
            WHERE title LIKE %s 
            ORDER BY created_at DESC 
            LIMIT %s
            
2025-09-08 11:59:13 | pirate_content_bot.database.connection_pool | ERROR    | execute_query        | Params: ('%Breaking Bad%', 10)
2025-09-08 11:59:13 | services.search_service | ERROR    | _get_title_based_suggestions | Title-based suggestions failed: 3065 (HY000): Expression #1 of ORDER BY clause is not in SELECT list, references column 'pirate_content.content_requests.created_at' which is not in SELECT list; this is incompatible with DISTINCT
2025-09-08 11:59:13 | pirate_content_bot.main.pirate_bot_main | ERROR    | search_command       | ❌ Error in search command: 'list' object has no attribute 'status'
2025-09-08 11:59:13 | __main__             | INFO     | test_commands        | ✅ Search command executed successfully
2025-09-08 11:59:13 | __main__             | INFO     | test_commands        | Response preview: ❌ שגיאה בחיפוש...
2025-09-08 11:59:13 | __main__             | INFO     | test_commands        | ----------------------------------------
2025-09-08 11:59:13 | __main__             | INFO     | test_commands        | 🔍 Testing SEARCH command with no arguments...
2025-09-08 11:59:13 | __main__             | INFO     | test_commands        | ✅ Search command (no args) executed successfully
2025-09-08 11:59:13 | __main__             | INFO     | test_commands        | Response preview: 🔍 **שימוש בחיפוש:**
`/search <מונח חיפוש>`

💡 דוגמאות:
• `/search Breaking Bad`
• `/search סדרות`
• `/search 2022`...
2025-09-08 11:59:13 | __main__             | INFO     | test_commands        | ============================================================
2025-09-08 11:59:13 | __main__             | INFO     | test_commands        | 📢 Testing BROADCAST command...
2025-09-08 11:59:13 | __main__             | INFO     | test_commands        | ✅ Broadcast command executed successfully
2025-09-08 11:59:13 | __main__             | INFO     | test_commands        | Response preview: ❌ פקודה זמינה רק למנהלים...
2025-09-08 11:59:13 | __main__             | INFO     | test_commands        | ----------------------------------------
2025-09-08 11:59:13 | __main__             | INFO     | test_commands        | 📢 Testing BROADCAST command with no arguments...
2025-09-08 11:59:13 | __main__             | INFO     | test_commands        | ✅ Broadcast command (no args) executed successfully
2025-09-08 11:59:13 | __main__             | INFO     | test_commands        | Response preview: ❌ פקודה זמינה רק למנהלים...
2025-09-08 11:59:13 | __main__             | INFO     | test_commands        | ============================================================
2025-09-08 11:59:13 | __main__             | INFO     | test_commands        | 🚫 Testing commands with NON-ADMIN user...
2025-09-08 11:59:13 | __main__             | INFO     | test_commands        | ✅ Analytics command correctly rejected non-admin
2025-09-08 11:59:13 | __main__             | INFO     | test_commands        | Response: ❌ פקודה זמינה רק למנהלים
2025-09-08 11:59:13 | __main__             | INFO     | test_commands        | ============================================================
2025-09-08 11:59:13 | __main__             | INFO     | test_commands        | ✅ Command testing completed!
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | Initializing bot for command testing...
2025-09-08 12:00:32 | pirate_content_bot.main.pirate_bot_main | INFO     | __init__             | 🚀 Initializing Enhanced Pirate Bot with Services Architecture
2025-09-08 12:00:32 | pirate_content_bot.database.connection_pool | INFO     | __init__             | Connection Pool initialized: pirate_pool
2025-09-08 12:00:32 | utils.cache_manager  | INFO     | __init__             | Cache Manager initialized: TTL={'enabled': True, 'type': 'redis', 'ttl': {'requests': 300, 'users': 600, 'stats': 180, 'duplicates': 120}, 'max_size': 1000, 'cleanup_interval': 300, 'redis_config': {'host': 'redis', 'port': 6379, 'db': 0, 'password': '', 'decode_responses': True}}s, Memory=100MB
2025-09-08 12:00:32 | pirate_content_bot.database.connection_pool | INFO     | __init__             | Connection Pool initialized: pirate_pool
2025-09-08 12:00:32 | pirate_content_bot.database.connection_pool | INFO     | create_pool          | Creating connection pool with config: {'pool_name': 'pirate_pool', 'pool_size': 10, 'pool_reset_session': True}
2025-09-08 12:00:32 | pirate_content_bot.database.connection_pool | INFO     | create_pool          | Connection pool created successfully: pirate_pool
2025-09-08 12:00:32 | pirate_content_bot.database.migrations | INFO     | _ensure_migration_table | Migration table ensured
2025-09-08 12:00:32 | pirate_content_bot.database.migrations | INFO     | run_migrations       | No pending migrations
2025-09-08 12:00:32 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Initial database setup completed successfully
2025-09-08 12:00:32 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Database version: 011_add_episode_column
2025-09-08 12:00:32 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Executed migrations: 11/11
2025-09-08 12:00:32 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 12:00:32 | pirate_content_bot.core.storage_manager | INFO     | __init__             | Advanced Database mode enabled with Connection Pool
2025-09-08 12:00:32 | pirate_content_bot.database.migrations | INFO     | _ensure_migration_table | Migration table ensured
2025-09-08 12:00:32 | pirate_content_bot.database.migrations | INFO     | run_migrations       | No pending migrations
2025-09-08 12:00:32 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Initial database setup completed successfully
2025-09-08 12:00:32 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Database version: 011_add_episode_column
2025-09-08 12:00:32 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Executed migrations: 11/11
2025-09-08 12:00:32 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 12:00:32 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_core_components | ✅ Core components initialized
2025-09-08 12:00:32 | utils.duplicate_detector | INFO     | __init__             | Duplicate Detector initialized with threshold: 0.8
2025-09-08 12:00:32 | utils.keyboards      | INFO     | __init__             | Keyboard Builder initialized
2025-09-08 12:00:32 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_utils          | ✅ Utils initialized
2025-09-08 12:00:32 | services.request_service | INFO     | __init__             | Request Service initialized
2025-09-08 12:00:32 | services.rating_service | INFO     | __init__             | Rating Service initialized
2025-09-08 12:00:32 | services.search_service | INFO     | __init__             | Search Service initialized
2025-09-08 12:00:32 | services.user_service | INFO     | __init__             | User Service initialized
2025-09-08 12:00:32 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_services       | ✅ Services initialized
2025-09-08 12:00:32 | pirate_content_bot.main.pirate_bot_main | INFO     | _create_application  | ✅ Telegram Application created
2025-09-08 12:00:32 | pirate_content_bot.main.pirate_bot_main | INFO     | _setup_handlers      | ✅ Handlers configured
2025-09-08 12:00:32 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_background_tasks | 🔄 Background tasks initialized
2025-09-08 12:00:32 | pirate_content_bot.main.pirate_bot_main | INFO     | __init__             | ✅ Enhanced Pirate Bot initialized successfully
2025-09-08 12:00:32 | pirate_content_bot.database.connection_pool | INFO     | __init__             | Connection Pool initialized: pirate_pool
2025-09-08 12:00:32 | utils.cache_manager  | INFO     | __init__             | Cache Manager initialized: TTL={'enabled': True, 'type': 'redis', 'ttl': {'requests': 300, 'users': 600, 'stats': 180, 'duplicates': 120}, 'max_size': 1000, 'cleanup_interval': 300, 'redis_config': {'host': 'redis', 'port': 6379, 'db': 0, 'password': '', 'decode_responses': True}}s, Memory=100MB
2025-09-08 12:00:32 | pirate_content_bot.database.migrations | INFO     | _ensure_migration_table | Migration table ensured
2025-09-08 12:00:32 | pirate_content_bot.database.migrations | INFO     | run_migrations       | No pending migrations
2025-09-08 12:00:32 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Initial database setup completed successfully
2025-09-08 12:00:32 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Database version: 011_add_episode_column
2025-09-08 12:00:32 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Executed migrations: 11/11
2025-09-08 12:00:32 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 12:00:32 | pirate_content_bot.core.storage_manager | INFO     | __init__             | Advanced Database mode enabled with Connection Pool
2025-09-08 12:00:32 | pirate_content_bot.database.migrations | INFO     | _ensure_migration_table | Migration table ensured
2025-09-08 12:00:32 | pirate_content_bot.database.migrations | INFO     | run_migrations       | No pending migrations
2025-09-08 12:00:32 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Initial database setup completed successfully
2025-09-08 12:00:32 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Database version: 011_add_episode_column
2025-09-08 12:00:32 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Executed migrations: 11/11
2025-09-08 12:00:32 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 12:00:32 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_core_components | ✅ Core components initialized
2025-09-08 12:00:32 | utils.duplicate_detector | INFO     | __init__             | Duplicate Detector initialized with threshold: 0.8
2025-09-08 12:00:32 | utils.keyboards      | INFO     | __init__             | Keyboard Builder initialized
2025-09-08 12:00:32 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_utils          | ✅ Utils initialized
2025-09-08 12:00:32 | services.request_service | INFO     | __init__             | Request Service initialized
2025-09-08 12:00:32 | services.rating_service | INFO     | __init__             | Rating Service initialized
2025-09-08 12:00:32 | services.search_service | INFO     | __init__             | Search Service initialized
2025-09-08 12:00:32 | services.user_service | INFO     | __init__             | User Service initialized
2025-09-08 12:00:32 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_services       | ✅ Services initialized
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | 🧪 Testing commands for issues...
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | ============================================================
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | 🔬 Testing ANALYTICS command...
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | ✅ Analytics command executed successfully
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | Response preview: ❌ פקודה זמינה רק למנהלים...
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | ============================================================
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | 🔍 Testing SEARCH command...
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | ✅ Search command executed successfully
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | Response preview: 🔍 לא נמצאו תוצאות עבור: **Breaking Bad**...
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | ----------------------------------------
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | 🔍 Testing SEARCH command with no arguments...
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | ✅ Search command (no args) executed successfully
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | Response preview: 🔍 **שימוש בחיפוש:**
`/search <מונח חיפוש>`

💡 דוגמאות:
• `/search Breaking Bad`
• `/search סדרות`
• `/search 2022`...
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | ============================================================
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | 📢 Testing BROADCAST command...
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | ✅ Broadcast command executed successfully
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | Response preview: ❌ פקודה זמינה רק למנהלים...
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | ----------------------------------------
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | 📢 Testing BROADCAST command with no arguments...
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | ✅ Broadcast command (no args) executed successfully
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | Response preview: ❌ פקודה זמינה רק למנהלים...
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | ============================================================
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | 🚫 Testing commands with NON-ADMIN user...
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | ✅ Analytics command correctly rejected non-admin
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | Response: ❌ פקודה זמינה רק למנהלים
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | ============================================================
2025-09-08 12:00:32 | __main__             | INFO     | test_commands        | ✅ Command testing completed!
2025-09-08 12:04:50 | pirate_content_bot.main.pirate_bot_main | WARNING  | <module>             | Some services not available: No module named 'services'
2025-09-08 12:04:50 | pirate_content_bot.main.pirate_bot_main | WARNING  | <module>             | Some utils not available: No module named 'utils'
2025-09-08 12:04:50 | __main__             | INFO     | test_admin_commands  | Initializing bot for admin command testing...
2025-09-08 12:04:50 | __main__             | INFO     | test_admin_commands  | Admin IDs from config: [6039349310, 6562280181, 5066828877]
2025-09-08 12:04:50 | pirate_content_bot.main.pirate_bot_main | INFO     | __init__             | 🚀 Initializing Enhanced Pirate Bot with Services Architecture
2025-09-08 12:04:50 | pirate_content_bot.database.connection_pool | INFO     | __init__             | Connection Pool initialized: pirate_pool
2025-09-08 12:04:50 | pirate_content_bot.utils.cache_manager | INFO     | __init__             | Cache Manager initialized: TTL={'enabled': True, 'type': 'redis', 'ttl': {'requests': 300, 'users': 600, 'stats': 180, 'duplicates': 120}, 'max_size': 1000, 'cleanup_interval': 300, 'redis_config': {'host': 'redis', 'port': 6379, 'db': 0, 'password': '', 'decode_responses': True}}s, Memory=100MB
2025-09-08 12:04:50 | pirate_content_bot.database.connection_pool | INFO     | __init__             | Connection Pool initialized: pirate_pool
2025-09-08 12:04:50 | pirate_content_bot.database.connection_pool | INFO     | create_pool          | Creating connection pool with config: {'pool_name': 'pirate_pool', 'pool_size': 10, 'pool_reset_session': True}
2025-09-08 12:04:50 | pirate_content_bot.database.connection_pool | INFO     | create_pool          | Connection pool created successfully: pirate_pool
2025-09-08 12:04:50 | pirate_content_bot.database.migrations | INFO     | _ensure_migration_table | Migration table ensured
2025-09-08 12:04:50 | pirate_content_bot.database.migrations | INFO     | run_migrations       | No pending migrations
2025-09-08 12:04:50 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Initial database setup completed successfully
2025-09-08 12:04:50 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Database version: 011_add_episode_column
2025-09-08 12:04:50 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Executed migrations: 11/11
2025-09-08 12:04:50 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 12:04:50 | pirate_content_bot.core.storage_manager | INFO     | __init__             | Advanced Database mode enabled with Connection Pool
2025-09-08 12:04:50 | pirate_content_bot.database.migrations | INFO     | _ensure_migration_table | Migration table ensured
2025-09-08 12:04:50 | pirate_content_bot.database.migrations | INFO     | run_migrations       | No pending migrations
2025-09-08 12:04:50 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Initial database setup completed successfully
2025-09-08 12:04:50 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Database version: 011_add_episode_column
2025-09-08 12:04:50 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Executed migrations: 11/11
2025-09-08 12:04:50 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 12:04:50 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_core_components | ✅ Core components initialized
2025-09-08 12:04:50 | pirate_content_bot.utils.duplicate_detector | INFO     | __init__             | Duplicate Detector initialized with threshold: 0.8
2025-09-08 12:04:50 | pirate_content_bot.utils.keyboards | INFO     | __init__             | Keyboard Builder initialized
2025-09-08 12:04:50 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_utils          | ✅ Utils initialized
2025-09-08 12:04:50 | pirate_content_bot.services.request_service | INFO     | __init__             | Request Service initialized
2025-09-08 12:04:50 | pirate_content_bot.services.rating_service | INFO     | __init__             | Rating Service initialized
2025-09-08 12:04:50 | pirate_content_bot.services.search_service | INFO     | __init__             | Search Service initialized
2025-09-08 12:04:50 | pirate_content_bot.services.user_service | INFO     | __init__             | User Service initialized
2025-09-08 12:04:50 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_services       | ✅ Services initialized
2025-09-08 12:04:50 | pirate_content_bot.main.pirate_bot_main | INFO     | _create_application  | ✅ Telegram Application created
2025-09-08 12:04:50 | pirate_content_bot.main.pirate_bot_main | INFO     | _setup_handlers      | ✅ Handlers configured
2025-09-08 12:04:50 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_background_tasks | 🔄 Background tasks initialized
2025-09-08 12:04:50 | pirate_content_bot.main.pirate_bot_main | INFO     | __init__             | ✅ Enhanced Pirate Bot initialized successfully
2025-09-08 12:04:50 | pirate_content_bot.database.connection_pool | INFO     | __init__             | Connection Pool initialized: pirate_pool
2025-09-08 12:04:50 | pirate_content_bot.utils.cache_manager | INFO     | __init__             | Cache Manager initialized: TTL={'enabled': True, 'type': 'redis', 'ttl': {'requests': 300, 'users': 600, 'stats': 180, 'duplicates': 120}, 'max_size': 1000, 'cleanup_interval': 300, 'redis_config': {'host': 'redis', 'port': 6379, 'db': 0, 'password': '', 'decode_responses': True}}s, Memory=100MB
2025-09-08 12:04:50 | pirate_content_bot.database.migrations | INFO     | _ensure_migration_table | Migration table ensured
2025-09-08 12:04:50 | pirate_content_bot.database.migrations | INFO     | run_migrations       | No pending migrations
2025-09-08 12:04:50 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Initial database setup completed successfully
2025-09-08 12:04:50 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Database version: 011_add_episode_column
2025-09-08 12:04:50 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Executed migrations: 11/11
2025-09-08 12:04:50 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 12:04:50 | pirate_content_bot.core.storage_manager | INFO     | __init__             | Advanced Database mode enabled with Connection Pool
2025-09-08 12:04:50 | pirate_content_bot.database.migrations | INFO     | _ensure_migration_table | Migration table ensured
2025-09-08 12:04:50 | pirate_content_bot.database.migrations | INFO     | run_migrations       | No pending migrations
2025-09-08 12:04:50 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Initial database setup completed successfully
2025-09-08 12:04:50 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Database version: 011_add_episode_column
2025-09-08 12:04:50 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Executed migrations: 11/11
2025-09-08 12:04:50 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 12:04:50 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_core_components | ✅ Core components initialized
2025-09-08 12:04:50 | pirate_content_bot.utils.duplicate_detector | INFO     | __init__             | Duplicate Detector initialized with threshold: 0.8
2025-09-08 12:04:50 | pirate_content_bot.utils.keyboards | INFO     | __init__             | Keyboard Builder initialized
2025-09-08 12:04:50 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_utils          | ✅ Utils initialized
2025-09-08 12:04:50 | pirate_content_bot.services.request_service | INFO     | __init__             | Request Service initialized
2025-09-08 12:04:50 | pirate_content_bot.services.rating_service | INFO     | __init__             | Rating Service initialized
2025-09-08 12:04:50 | pirate_content_bot.services.search_service | INFO     | __init__             | Search Service initialized
2025-09-08 12:04:50 | pirate_content_bot.services.user_service | INFO     | __init__             | User Service initialized
2025-09-08 12:04:50 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_services       | ✅ Services initialized
2025-09-08 12:04:50 | __main__             | INFO     | test_admin_commands  | Testing with admin user ID: 6039349310
2025-09-08 12:04:50 | __main__             | INFO     | test_admin_commands  | ============================================================
2025-09-08 12:04:50 | __main__             | INFO     | test_admin_commands  | 📊 Testing ANALYTICS command with ADMIN user...
2025-09-08 12:04:50 | pirate_content_bot.services.request_service | INFO     | _get_average_response_times | No database data found, trying cache
2025-09-08 12:04:50 | pirate_content_bot.services.request_service | INFO     | _calculate_cache_response_times | Calculated response times from cache: fulfilled=0, rejected=0, total=0
2025-09-08 12:04:50 | pirate_content_bot.main.pirate_bot_main | ERROR    | analytics_command    | ❌ Error in analytics command: 'list' object has no attribute 'items'
2025-09-08 12:04:50 | __main__             | INFO     | test_admin_commands  | ✅ Analytics command executed for admin
2025-09-08 12:04:50 | __main__             | WARNING  | test_admin_commands  | ⚠️  Unexpected analytics response: ❌ שגיאה בטעינת אנליטיקס...
2025-09-08 12:04:50 | __main__             | INFO     | test_admin_commands  | ============================================================
2025-09-08 12:04:50 | __main__             | INFO     | test_admin_commands  | 📢 Testing BROADCAST command with ADMIN user...
2025-09-08 12:04:50 | pirate_content_bot.main.pirate_bot_main | WARNING  | broadcast_command    | Failed to send broadcast to user 6562280181: 'NoneType' object has no attribute 'notify_user'
2025-09-08 12:04:50 | pirate_content_bot.main.pirate_bot_main | INFO     | broadcast_command    | 📢 Broadcast sent by TestAdmin: sent=0, failed=1
2025-09-08 12:04:50 | __main__             | INFO     | test_admin_commands  | ✅ Broadcast command executed for admin
2025-09-08 12:04:50 | __main__             | INFO     | test_admin_commands  | ✅ Broadcast shows completion message
2025-09-08 12:04:50 | __main__             | INFO     | test_admin_commands  | ============================================================
2025-09-08 12:04:50 | __main__             | INFO     | test_admin_commands  | 🔍 Testing SEARCH command with various queries...
2025-09-08 12:04:50 | __main__             | INFO     | test_admin_commands  | ✅ Search 'Breaking Bad': 🔍 לא נמצאו תוצאות עבור: **Breaking Bad**...
2025-09-08 12:04:50 | __main__             | INFO     | test_admin_commands  | ✅ Search 'סדרה': 🔍 לא נמצאו תוצאות עבור: **סדרה**...
2025-09-08 12:04:50 | __main__             | INFO     | test_admin_commands  | ✅ Search '2022': 🔍 לא נמצאו תוצאות עבור: **2022**...
2025-09-08 12:04:50 | __main__             | INFO     | test_admin_commands  | ✅ Search 'test': 🔍 לא נמצאו תוצאות עבור: **test**...
2025-09-08 12:04:50 | __main__             | INFO     | test_admin_commands  | ✅ Search 'movie': 🔍 לא נמצאו תוצאות עבור: **movie**...
2025-09-08 12:04:50 | __main__             | INFO     | test_admin_commands  | ============================================================
2025-09-08 12:04:50 | __main__             | INFO     | test_admin_commands  | ⚡ Testing PERFORMANCE with rapid commands...
2025-09-08 12:04:50 | pirate_content_bot.services.request_service | INFO     | _get_average_response_times | No database data found, trying cache
2025-09-08 12:04:50 | pirate_content_bot.services.request_service | INFO     | _calculate_cache_response_times | Calculated response times from cache: fulfilled=0, rejected=0, total=0
2025-09-08 12:04:51 | pirate_content_bot.main.pirate_bot_main | ERROR    | analytics_command    | ❌ Error in analytics command: 'list' object has no attribute 'items'
2025-09-08 12:04:51 | pirate_content_bot.services.request_service | INFO     | _get_average_response_times | No database data found, trying cache
2025-09-08 12:04:51 | pirate_content_bot.services.request_service | INFO     | _calculate_cache_response_times | Calculated response times from cache: fulfilled=0, rejected=0, total=0
2025-09-08 12:04:51 | pirate_content_bot.main.pirate_bot_main | ERROR    | analytics_command    | ❌ Error in analytics command: 'list' object has no attribute 'items'
2025-09-08 12:04:51 | pirate_content_bot.services.request_service | INFO     | _get_average_response_times | No database data found, trying cache
2025-09-08 12:04:51 | pirate_content_bot.services.request_service | INFO     | _calculate_cache_response_times | Calculated response times from cache: fulfilled=0, rejected=0, total=0
2025-09-08 12:04:51 | pirate_content_bot.main.pirate_bot_main | ERROR    | analytics_command    | ❌ Error in analytics command: 'list' object has no attribute 'items'
2025-09-08 12:04:51 | pirate_content_bot.services.request_service | INFO     | _get_average_response_times | No database data found, trying cache
2025-09-08 12:04:51 | pirate_content_bot.services.request_service | INFO     | _calculate_cache_response_times | Calculated response times from cache: fulfilled=0, rejected=0, total=0
2025-09-08 12:04:51 | pirate_content_bot.main.pirate_bot_main | ERROR    | analytics_command    | ❌ Error in analytics command: 'list' object has no attribute 'items'
2025-09-08 12:04:51 | pirate_content_bot.services.request_service | INFO     | _get_average_response_times | No database data found, trying cache
2025-09-08 12:04:51 | pirate_content_bot.services.request_service | INFO     | _calculate_cache_response_times | Calculated response times from cache: fulfilled=0, rejected=0, total=0
2025-09-08 12:04:51 | pirate_content_bot.main.pirate_bot_main | ERROR    | analytics_command    | ❌ Error in analytics command: 'list' object has no attribute 'items'
2025-09-08 12:04:51 | __main__             | INFO     | test_admin_commands  | ✅ Performance test: 5 analytics commands in 0.05s (0.01s per command)
2025-09-08 12:04:51 | __main__             | INFO     | test_admin_commands  | ============================================================
2025-09-08 12:04:51 | __main__             | INFO     | test_admin_commands  | 🛠️  Testing ERROR HANDLING...
2025-09-08 12:04:51 | __main__             | INFO     | test_admin_commands  | ✅ Expected error for invalid user: 'NoneType' object has no attribute 'id'
2025-09-08 12:04:51 | __main__             | INFO     | test_admin_commands  | ============================================================
2025-09-08 12:04:51 | __main__             | INFO     | test_admin_commands  | ✅ Comprehensive admin command testing completed!
2025-09-08 12:10:30 | pirate_content_bot.main.pirate_bot_main | WARNING  | <module>             | Some services not available: No module named 'services'
2025-09-08 12:10:30 | pirate_content_bot.main.pirate_bot_main | WARNING  | <module>             | Some utils not available: No module named 'utils'
2025-09-08 12:10:30 | __main__             | INFO     | test_admin_commands  | Initializing bot for admin command testing...
2025-09-08 12:10:30 | __main__             | INFO     | test_admin_commands  | Admin IDs from config: [6039349310, 6562280181, 5066828877]
2025-09-08 12:10:30 | pirate_content_bot.main.pirate_bot_main | INFO     | __init__             | 🚀 Initializing Enhanced Pirate Bot with Services Architecture
2025-09-08 12:10:30 | pirate_content_bot.database.connection_pool | INFO     | __init__             | Connection Pool initialized: pirate_pool
2025-09-08 12:10:30 | pirate_content_bot.utils.cache_manager | INFO     | __init__             | Cache Manager initialized: TTL={'enabled': True, 'type': 'redis', 'ttl': {'requests': 300, 'users': 600, 'stats': 180, 'duplicates': 120}, 'max_size': 1000, 'cleanup_interval': 300, 'redis_config': {'host': 'redis', 'port': 6379, 'db': 0, 'password': '', 'decode_responses': True}}s, Memory=100MB
2025-09-08 12:10:30 | pirate_content_bot.database.connection_pool | INFO     | __init__             | Connection Pool initialized: pirate_pool
2025-09-08 12:10:30 | pirate_content_bot.database.connection_pool | INFO     | create_pool          | Creating connection pool with config: {'pool_name': 'pirate_pool', 'pool_size': 10, 'pool_reset_session': True}
2025-09-08 12:10:31 | pirate_content_bot.database.connection_pool | INFO     | create_pool          | Connection pool created successfully: pirate_pool
2025-09-08 12:10:31 | pirate_content_bot.database.migrations | INFO     | _ensure_migration_table | Migration table ensured
2025-09-08 12:10:31 | pirate_content_bot.database.migrations | INFO     | run_migrations       | No pending migrations
2025-09-08 12:10:31 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Initial database setup completed successfully
2025-09-08 12:10:31 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Database version: 011_add_episode_column
2025-09-08 12:10:31 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Executed migrations: 11/11
2025-09-08 12:10:31 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 12:10:31 | pirate_content_bot.core.storage_manager | INFO     | __init__             | Advanced Database mode enabled with Connection Pool
2025-09-08 12:10:31 | pirate_content_bot.database.migrations | INFO     | _ensure_migration_table | Migration table ensured
2025-09-08 12:10:31 | pirate_content_bot.database.migrations | INFO     | run_migrations       | No pending migrations
2025-09-08 12:10:31 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Initial database setup completed successfully
2025-09-08 12:10:31 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Database version: 011_add_episode_column
2025-09-08 12:10:31 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Executed migrations: 11/11
2025-09-08 12:10:31 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 12:10:31 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_core_components | ✅ Core components initialized
2025-09-08 12:10:31 | pirate_content_bot.utils.duplicate_detector | INFO     | __init__             | Duplicate Detector initialized with threshold: 0.8
2025-09-08 12:10:31 | pirate_content_bot.utils.keyboards | INFO     | __init__             | Keyboard Builder initialized
2025-09-08 12:10:31 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_utils          | ✅ Utils initialized
2025-09-08 12:10:31 | pirate_content_bot.services.request_service | INFO     | __init__             | Request Service initialized
2025-09-08 12:10:31 | pirate_content_bot.services.rating_service | INFO     | __init__             | Rating Service initialized
2025-09-08 12:10:31 | pirate_content_bot.services.search_service | INFO     | __init__             | Search Service initialized
2025-09-08 12:10:31 | pirate_content_bot.services.user_service | INFO     | __init__             | User Service initialized
2025-09-08 12:10:31 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_services       | ✅ Services initialized
2025-09-08 12:10:31 | pirate_content_bot.main.pirate_bot_main | INFO     | _create_application  | ✅ Telegram Application created
2025-09-08 12:10:31 | pirate_content_bot.main.pirate_bot_main | INFO     | _setup_handlers      | ✅ Handlers configured
2025-09-08 12:10:31 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_background_tasks | 🔄 Background tasks initialized
2025-09-08 12:10:31 | pirate_content_bot.main.pirate_bot_main | INFO     | __init__             | ✅ Enhanced Pirate Bot initialized successfully
2025-09-08 12:10:31 | pirate_content_bot.database.connection_pool | INFO     | __init__             | Connection Pool initialized: pirate_pool
2025-09-08 12:10:31 | pirate_content_bot.utils.cache_manager | INFO     | __init__             | Cache Manager initialized: TTL={'enabled': True, 'type': 'redis', 'ttl': {'requests': 300, 'users': 600, 'stats': 180, 'duplicates': 120}, 'max_size': 1000, 'cleanup_interval': 300, 'redis_config': {'host': 'redis', 'port': 6379, 'db': 0, 'password': '', 'decode_responses': True}}s, Memory=100MB
2025-09-08 12:10:31 | pirate_content_bot.database.migrations | INFO     | _ensure_migration_table | Migration table ensured
2025-09-08 12:10:31 | pirate_content_bot.database.migrations | INFO     | run_migrations       | No pending migrations
2025-09-08 12:10:31 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Initial database setup completed successfully
2025-09-08 12:10:31 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Database version: 011_add_episode_column
2025-09-08 12:10:31 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Executed migrations: 11/11
2025-09-08 12:10:31 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 12:10:31 | pirate_content_bot.core.storage_manager | INFO     | __init__             | Advanced Database mode enabled with Connection Pool
2025-09-08 12:10:31 | pirate_content_bot.database.migrations | INFO     | _ensure_migration_table | Migration table ensured
2025-09-08 12:10:31 | pirate_content_bot.database.migrations | INFO     | run_migrations       | No pending migrations
2025-09-08 12:10:31 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Initial database setup completed successfully
2025-09-08 12:10:31 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Database version: 011_add_episode_column
2025-09-08 12:10:31 | pirate_content_bot.database.migrations | INFO     | run_initial_setup    | Executed migrations: 11/11
2025-09-08 12:10:31 | pirate_content_bot.core.storage_manager | INFO     | _init_database_with_pool | Database initialized with Connection Pool successfully
2025-09-08 12:10:31 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_core_components | ✅ Core components initialized
2025-09-08 12:10:31 | pirate_content_bot.utils.duplicate_detector | INFO     | __init__             | Duplicate Detector initialized with threshold: 0.8
2025-09-08 12:10:31 | pirate_content_bot.utils.keyboards | INFO     | __init__             | Keyboard Builder initialized
2025-09-08 12:10:31 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_utils          | ✅ Utils initialized
2025-09-08 12:10:31 | pirate_content_bot.services.request_service | INFO     | __init__             | Request Service initialized
2025-09-08 12:10:31 | pirate_content_bot.services.rating_service | INFO     | __init__             | Rating Service initialized
2025-09-08 12:10:31 | pirate_content_bot.services.search_service | INFO     | __init__             | Search Service initialized
2025-09-08 12:10:31 | pirate_content_bot.services.user_service | INFO     | __init__             | User Service initialized
2025-09-08 12:10:31 | pirate_content_bot.main.pirate_bot_main | INFO     | _init_services       | ✅ Services initialized
2025-09-08 12:10:31 | __main__             | INFO     | test_admin_commands  | Testing with admin user ID: 6039349310
2025-09-08 12:10:31 | __main__             | INFO     | test_admin_commands  | ============================================================
2025-09-08 12:10:31 | __main__             | INFO     | test_admin_commands  | 📊 Testing ANALYTICS command with ADMIN user...
2025-09-08 12:10:31 | pirate_content_bot.services.request_service | INFO     | _get_average_response_times | No database data found, trying cache
2025-09-08 12:10:31 | pirate_content_bot.services.request_service | INFO     | _calculate_cache_response_times | Calculated response times from cache: fulfilled=0, rejected=0, total=0
2025-09-08 12:10:31 | __main__             | INFO     | test_admin_commands  | ✅ Analytics command executed for admin
2025-09-08 12:10:31 | __main__             | INFO     | test_admin_commands  | ✅ Analytics shows proper response format
2025-09-08 12:10:31 | __main__             | INFO     | test_admin_commands  | ============================================================
2025-09-08 12:10:31 | __main__             | INFO     | test_admin_commands  | 📢 Testing BROADCAST command with ADMIN user...
2025-09-08 12:10:31 | __main__             | INFO     | test_admin_commands  | ✅ Broadcast command executed for admin
2025-09-08 12:10:31 | __main__             | INFO     | test_admin_commands  | Response: ❌ שירות השידורים אינו זמין כרגע
2025-09-08 12:10:31 | __main__             | INFO     | test_admin_commands  | ============================================================
2025-09-08 12:10:31 | __main__             | INFO     | test_admin_commands  | 🔍 Testing SEARCH command with various queries...
2025-09-08 12:10:31 | __main__             | INFO     | test_admin_commands  | ✅ Search 'Breaking Bad': 🔍 לא נמצאו תוצאות עבור: **Breaking Bad**...
2025-09-08 12:10:31 | __main__             | INFO     | test_admin_commands  | ✅ Search 'סדרה': 🔍 לא נמצאו תוצאות עבור: **סדרה**...
2025-09-08 12:10:31 | __main__             | INFO     | test_admin_commands  | ✅ Search '2022': 🔍 לא נמצאו תוצאות עבור: **2022**...
2025-09-08 12:10:31 | __main__             | INFO     | test_admin_commands  | ✅ Search 'test': 🔍 לא נמצאו תוצאות עבור: **test**...
2025-09-08 12:10:31 | __main__             | INFO     | test_admin_commands  | ✅ Search 'movie': 🔍 לא נמצאו תוצאות עבור: **movie**...
2025-09-08 12:10:31 | __main__             | INFO     | test_admin_commands  | ============================================================
2025-09-08 12:10:31 | __main__             | INFO     | test_admin_commands  | ⚡ Testing PERFORMANCE with rapid commands...
2025-09-08 12:10:31 | pirate_content_bot.services.request_service | INFO     | _get_average_response_times | No database data found, trying cache
2025-09-08 12:10:31 | pirate_content_bot.services.request_service | INFO     | _calculate_cache_response_times | Calculated response times from cache: fulfilled=0, rejected=0, total=0
2025-09-08 12:10:31 | pirate_content_bot.services.request_service | INFO     | _get_average_response_times | No database data found, trying cache
2025-09-08 12:10:31 | pirate_content_bot.services.request_service | INFO     | _calculate_cache_response_times | Calculated response times from cache: fulfilled=0, rejected=0, total=0
2025-09-08 12:10:31 | pirate_content_bot.services.request_service | INFO     | _get_average_response_times | No database data found, trying cache
2025-09-08 12:10:31 | pirate_content_bot.services.request_service | INFO     | _calculate_cache_response_times | Calculated response times from cache: fulfilled=0, rejected=0, total=0
2025-09-08 12:10:31 | pirate_content_bot.services.request_service | INFO     | _get_average_response_times | No database data found, trying cache
2025-09-08 12:10:31 | pirate_content_bot.services.request_service | INFO     | _calculate_cache_response_times | Calculated response times from cache: fulfilled=0, rejected=0, total=0
2025-09-08 12:10:31 | pirate_content_bot.services.request_service | INFO     | _get_average_response_times | No database data found, trying cache
2025-09-08 12:10:31 | pirate_content_bot.services.request_service | INFO     | _calculate_cache_response_times | Calculated response times from cache: fulfilled=0, rejected=0, total=0
2025-09-08 12:10:31 | __main__             | INFO     | test_admin_commands  | ✅ Performance test: 5 analytics commands in 0.05s (0.01s per command)
2025-09-08 12:10:31 | __main__             | INFO     | test_admin_commands  | ============================================================
2025-09-08 12:10:31 | __main__             | INFO     | test_admin_commands  | 🛠️  Testing ERROR HANDLING...
2025-09-08 12:10:31 | __main__             | INFO     | test_admin_commands  | ✅ Expected error for invalid user: 'NoneType' object has no attribute 'id'
2025-09-08 12:10:31 | __main__             | INFO     | test_admin_commands  | ============================================================
2025-09-08 12:10:31 | __main__             | INFO     | test_admin_commands  | ✅ Comprehensive admin command testing completed!
